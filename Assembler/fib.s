;斐波那契程序
define LI_INST LI
SW_SP R6 0
ADDSP 1
B GOTO_MAIN
GOTO_MAIN:
GOTO MAIN
DATA ARRAY 3


MAIN:
LI R0 0 ;R0 R1分别记录斐波那契相邻的两项
LI     R1 1 
li R2 2
SAVE_DATA ARRAY R1 0
SAVE_DATA ARRAY R2 1
LOAD_DATA ARRAY R1 1
LOAD_DATA ARRAY R2 0
LI_INST R3 80
SLL R3 R3 0
LI R4 01
SLL R4 R4 0
L1:
  SW R3 R1 0
  SW R3 R2 1
  ADDU R1 R2 R1
  ADDU R1 R2 R2
  MOVE R0 R3 ;ADDIU R3 2
  CALL PLUS2
  MOVE R3 R0
  ADDIU R4 FF
  BNEZ R4 L1
  NOP
LOAD_DATA ARRAY R6 2
JR R7
NOP
ADDSP FF
LW_SP R6 0

PLUS2:
  ADDIU R0 2
  RET



;end